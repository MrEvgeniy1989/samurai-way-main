"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[445],{5445:function(t,r,e){e.r(r),e.d(r,{default:function(){return O}});var n=e(1413),s=e(5671),o=e(3144),i=e(136),a=e(5716),u=e(2791),l={},c="ProfileInfo_descriptionBlock__UU8E7",f="ProfileInfo_mainPhoto__moSds",d="ProfileInfo_fileInput__5GOXw",p=e(3445),h=e(885),m=e(184),v=function(t){var r=t.status,e=t.updateStatus,n=(0,u.useState)(!1),s=(0,h.Z)(n,2),o=s[0],i=s[1],a=(0,u.useState)(r),l=(0,h.Z)(a,2),c=l[0],f=l[1];(0,u.useEffect)((function(){r!==c&&f(r)}),[r]);return(0,m.jsxs)("div",{children:["Status:",o?(0,m.jsx)("div",{children:(0,m.jsx)("input",{onChange:function(t){f(t.currentTarget.value)},value:c,onBlur:function(){i(!1),e(c)},autoFocus:!0})}):(0,m.jsx)("div",{children:(0,m.jsx)("span",{onDoubleClick:function(){i(!0)},children:r||"---"})})]})},x=e(4353),j=function(t){var r,e=t.profile,n=t.status,s=t.updateStatus,o=t.isOwner,i=t.savePhoto;if(!e)return(0,m.jsx)(p.p,{});return(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:c,children:[(0,m.jsx)("img",{src:(null===(r=e.photos)||void 0===r?void 0:r.large)||x,alt:"Avatar",className:f}),o&&(0,m.jsx)("input",{type:"file",className:d,onChange:function(t){t.target.files&&t.target.files.length&&i(t.target.files[0])}}),(0,m.jsx)(v,{status:n,updateStatus:s})]})})},g=e(81),_=e(2982),P="MyPosts_postsBlock__UQGsK",Z="MyPosts_posts__eHHT8",y="Post_item__3RAd4",S=function(t){return(0,m.jsxs)("div",{className:y,children:[(0,m.jsx)("img",{src:"https://365psd.com/images/istock/previews/9730/97305669-avatar-icon-of-girl-in-a-baseball-cap.jpg",alt:"avatar_icon"}),t.message,(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{children:"like"}),t.likesCount]})]})},b=e(6139),C=e(704),w=e(3079),k=e(1117),I=(0,w.D)(10),N=(0,C.Z)({form:"ProfileAddNewPostForm"})((function(t){return(0,m.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,m.jsx)("div",{children:(0,m.jsx)(b.Z,{name:"newPostText",component:k.gx,placeholder:"Post message",validate:[w.C,I]})}),(0,m.jsx)("div",{children:(0,m.jsx)("button",{children:"Add post"})})]})})),U=e(364),A=(0,U.$j)((function(t){return{posts:t.profilePage.posts}}),(function(t){return{addPost:function(r){t((0,g.Wl)(r))}}}))((function(t){var r=(0,_.Z)(t.posts).reverse().map((function(t){return(0,m.jsx)(S,{message:t.message,likesCount:t.likesCount},t.id)}));return(0,m.jsxs)("div",{className:P,children:[(0,m.jsx)("h3",{children:"My posts"}),(0,m.jsx)(N,{onSubmit:function(r){t.addPost(r.newPostText)}}),(0,m.jsx)("div",{className:Z,children:r})]})})),E=function(t){return(0,m.jsxs)("div",{className:l.profile,children:[(0,m.jsx)(j,{savePhoto:t.savePhoto,isOwner:t.isOwner,profile:t.profile,status:t.status,updateStatus:t.updateStatus}),(0,m.jsx)(A,{})]})},F=e(9271),D=e(7781),M=function(t){(0,i.Z)(e,t);var r=(0,a.Z)(e);function e(){return(0,s.Z)(this,e),r.apply(this,arguments)}return(0,o.Z)(e,[{key:"refreshProfile",value:function(){var t=+this.props.match.params.userId;t||(null!==this.props.authorizedUserId?t=this.props.authorizedUserId:this.props.history.push("login")),this.props.getUserProfile(t),this.props.getStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,r,e){this.props.match.params.userId!==t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,m.jsx)(E,(0,n.Z)((0,n.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))}}]),e}(u.Component),O=(0,D.qC)((0,U.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.userId,isAuth:t.auth.isAuth}}),{getUserProfile:g.et,getStatus:g.lR,updateStatus:g.Nf,savePhoto:g.Ju}),F.EN)(M)},1117:function(t,r,e){e.d(r,{gx:function(){return f},II:function(){return d},Gr:function(){return p}});var n=e(1413),s=e(5987),o=(e(2791),e(9234)),i=e(6139),a=e(184),u=["input","meta"],l=["input","meta"],c=function(t){var r=t.meta,e=r.touched,n=r.error,s=t.children,i=e&&n;return(0,a.jsxs)("div",{className:o.Z.formControl+" "+(i?o.Z.error:""),children:[(0,a.jsx)("div",{children:s}),i&&(0,a.jsx)("span",{children:n})]})},f=function(t){var r=t.input,e=(t.meta,(0,s.Z)(t,u));return(0,a.jsx)(c,(0,n.Z)((0,n.Z)({},t),{},{children:(0,a.jsx)("textarea",(0,n.Z)((0,n.Z)({},r),e))}))},d=function(t){var r=t.input,e=(t.meta,(0,s.Z)(t,l));return(0,a.jsx)(c,(0,n.Z)((0,n.Z)({},t),{},{children:(0,a.jsx)("input",(0,n.Z)((0,n.Z)({},r),e))}))},p=function(t,r,e,s){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Z,(0,n.Z)({placeholder:t,name:r,validate:e,component:s},o))," ",u]})}},3079:function(t,r,e){e.d(r,{C:function(){return n},D:function(){return s}});var n=function(t){if(!t)return"Field is required"},s=function(t){return function(r){if(r.length>t)return"Max length is ".concat(t," symbols")}}},9234:function(t,r){r.Z={formControl:"FormsControls_formControl__iw5Wr",error:"FormsControls_error__vUZR7",formSummaryError:"FormsControls_formSummaryError__P7Ljl"}},4353:function(t,r,e){t.exports=e.p+"static/media/user.5faf09a7795d28bf5a2b.png"},885:function(t,r,e){e.d(r,{Z:function(){return s}});var n=e(181);function s(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,s,o=[],i=!0,a=!1;try{for(e=e.call(t);!(i=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);i=!0);}catch(u){a=!0,s=u}finally{try{i||null==e.return||e.return()}finally{if(a)throw s}}return o}}(t,r)||(0,n.Z)(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=445.0aa66cfa.chunk.js.map