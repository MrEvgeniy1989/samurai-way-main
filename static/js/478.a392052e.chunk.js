"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[478],{1478:function(e,r,s){s.r(r),s.d(r,{ChatPage:function(){return g}});var n=s(885);var a=s(2791),t=s(364),i=s(7773),u="ChatPage_message__ekaVF",c="ChatPage_message__user__QdWKY",o="ChatPage_message__text__3gkg-",l="ChatPage_addMessageForm__aMkhb",h="ChatPage_message__form__683ZH",d=s(166),f=s(7359),v=s(184),g=function(){return(0,v.jsx)("div",{children:(0,v.jsx)(m,{})})},m=function(){var e=(0,t.I0)(),r=(0,t.v9)((function(e){return e.chat.status}));return(0,a.useEffect)((function(){return e((0,i.WE)()),function(){e((0,i.R7)())}}),[]),(0,v.jsxs)("div",{children:["error"===r&&(0,v.jsx)("div",{children:"Some error occured. Please refresh the page"}),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{children:(0,v.jsx)(x,{})}),(0,v.jsx)("hr",{}),(0,v.jsx)("div",{className:l,children:(0,v.jsx)(j,{})})]})]})},x=function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e);var r=(0,t.v9)((function(e){return e.chat.messages})),s=(0,a.useRef)(null),i=(0,a.useState)(!0),u=(0,n.Z)(i,2),c=u[0],o=u[1];return(0,a.useEffect)((function(){var e;c&&(null===(e=s.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[r]),(0,v.jsxs)("div",{style:{height:"600px",overflowY:"auto"},onScroll:function(e){var r=e.currentTarget;Math.abs(r.scrollHeight-r.scrollTop-r.clientHeight)<300?!c&&o(!0):c&&o(!1)},children:[r.map((function(e){return(0,v.jsx)(_,{message:e},e.id)})),(0,v.jsx)("div",{ref:s})]})},_=a.memo((function(e){var r=e.message;return(0,v.jsxs)("div",{className:u,children:[(0,v.jsx)("div",{className:c,children:(0,v.jsx)("img",{src:r.photo,alt:"avatar"})}),(0,v.jsxs)("div",{className:o,children:[(0,v.jsx)("b",{children:r.userName}),r.message]}),(0,v.jsx)("hr",{})]})})),j=function(){var e=(0,a.useState)(""),r=(0,n.Z)(e,2),s=r[0],u=r[1],c=(0,t.I0)(),o=(0,t.v9)((function(e){return e.chat.status})),l=d.Z.TextArea;return(0,v.jsxs)("div",{className:h,children:[(0,v.jsx)(l,{onChange:function(e){return u(e.currentTarget.value)},value:s}),(0,v.jsx)(f.Z,{disabled:"ready"!==o,onClick:function(){s&&(c((0,i.bG)(s)),u(""))},children:"Send"})]})}}}]);
//# sourceMappingURL=478.a392052e.chunk.js.map